From: Paul Holzinger <pholzing@redhat.com>
Date: Thu, 4 Apr 2024 18:09:11 +0200
Subject: update github.com/rootless-containers/rootlesskit to v2

Contains a breaking change but also besides this renovate is not able to
update the import paths so this needs to be done by hand.

Signed-off-by: Paul Holzinger <pholzing@redhat.com>
---
 cmd/rootlessport/main.go     | 8 ++++----
 cmd/rootlessport/wsl.go      | 2 +-
 cmd/rootlessport/wsl_test.go | 2 +-
 3 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/cmd/rootlessport/main.go b/cmd/rootlessport/main.go
index 9b24f04..1f5692d 100644
--- a/cmd/rootlessport/main.go
+++ b/cmd/rootlessport/main.go
@@ -17,9 +17,9 @@ import (
 	"github.com/containernetworking/plugins/pkg/ns"
 	"github.com/containers/common/libnetwork/types"
 	"github.com/containers/common/pkg/rootlessport"
-	rkport "github.com/rootless-containers/rootlesskit/pkg/port"
-	rkbuiltin "github.com/rootless-containers/rootlesskit/pkg/port/builtin"
-	rkportutil "github.com/rootless-containers/rootlesskit/pkg/port/portutil"
+	rkport "github.com/rootless-containers/rootlesskit/v2/pkg/port"
+	rkbuiltin "github.com/rootless-containers/rootlesskit/v2/pkg/port/builtin"
+	rkportutil "github.com/rootless-containers/rootlesskit/v2/pkg/port/portutil"
 	"github.com/sirupsen/logrus"
 	"golang.org/x/sys/unix"
 )
@@ -343,7 +343,7 @@ func child() error {
 	errCh := make(chan error)
 	go func() {
 		d := rkbuiltin.NewChildDriver(os.Stderr)
-		dErr := d.RunChildDriver(opaque, quit)
+		dErr := d.RunChildDriver(opaque, quit, "")
 		errCh <- dErr
 	}()
 	defer func() {
diff --git a/cmd/rootlessport/wsl.go b/cmd/rootlessport/wsl.go
index 01b0981..b43c5f8 100644
--- a/cmd/rootlessport/wsl.go
+++ b/cmd/rootlessport/wsl.go
@@ -5,7 +5,7 @@ import (
 	"strings"
 
 	"github.com/containers/common/pkg/machine"
-	rkport "github.com/rootless-containers/rootlesskit/pkg/port"
+	rkport "github.com/rootless-containers/rootlesskit/v2/pkg/port"
 )
 
 // WSL machines do not relay ipv4 traffic to dual-stack ports, simulate instead
diff --git a/cmd/rootlessport/wsl_test.go b/cmd/rootlessport/wsl_test.go
index 2c95251..ac23e22 100644
--- a/cmd/rootlessport/wsl_test.go
+++ b/cmd/rootlessport/wsl_test.go
@@ -4,7 +4,7 @@ import (
 	"testing"
 
 	"github.com/containers/common/pkg/machine"
-	"github.com/rootless-containers/rootlesskit/pkg/port"
+	"github.com/rootless-containers/rootlesskit/v2/pkg/port"
 	"github.com/stretchr/testify/assert"
 )
 
